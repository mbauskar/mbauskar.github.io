(this["webpackJsonpverify-parsers"]=this["webpackJsonpverify-parsers"]||[]).push([[0],{33:function(e,n,t){"use strict";(function(e){t.d(n,"a",(function(){return a}));var r=t(34),a=function n(t){var a=this;Object(r.a)(this,n),this.prepareParameterMappings=function(){a.parameter_mapping={},a.parameter_options={},a.available_server_names=[];for(var e=a.settings.matchingKeywords,n=void 0===e?[]:e,t=0;t<n.length;t++){var r=n[t],i=r.machinename,o=void 0===i?"":i,c=r.servername,s=void 0===c?"":c;a.parameter_mapping[o]=s,a.parameter_options[s]=r,a.available_server_names.push(s)}},this.send=function(e){return console.warn("[MockDevice] ".concat(e))},this.info=function(e,n){return console.log("[".concat(n||"MockDevice","] ").concat(e))},this.debug=function(e,n){return console.warn("[".concat(n||"MockDevice","] ").concat(e))},this.error=function(e,n){return console.error("[".concat(n||"MockDevice","] ").concat(e))},this.modulo_256=function(n){var t=e.from(n).reduce((function(e,n){return e+n}),0);return"00".concat((t%256).toString(16).toUpperCase()).slice(-2)},this.parse_and_calculate_value=function(e,n){var t="",r={divide_by:1,multiply_by:1,max_decimals:2},i={divide_by:function(e,n){return e/n},multiply_by:function(e,n){return e*n},max_decimals:function(e,n){return e.toFixed(n)},apply_round:function(e,n){return Math.round(e)},requires_int:function(e,n){return parseInt(e)}},o=e in a.parameter_options?a.parameter_options[e]:{};if(isNaN(n)||isNaN(parseFloat(n)))return n;t=parseFloat(n);return["divide_by","multiply_by","max_decimals","apply_round","requires_int"].forEach((function(e){try{if(!(e in o))return;var n=o[e];n=isNaN(n)?r[e]:n,t=(n?i[e]:function(e){return e})(t,n)}catch(c){a.error(c.stack)}})),t},this.device=t,this.settings="settings"in t?t.settings:{},this.prepareParameterMappings()}}).call(this,t(73).Buffer)},36:function(e,n,t){e.exports=t(79)},77:function(e,n,t){},79:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),i=t(15),o=t.n(i),c=t(18),s=t(7),l=t(5),u=t(19),d=t(84),p=t(83),v=t(23),f=t(35),m=function(e,n){return D.dispatch({type:"BULK_INSERT",model:e,instances:n})},h=function(e){(e=e||[]).unshift({id:-1,s3_key:null,file_name:"Select Parser"}),m("DeviceParser",g(e,"id"))},g=function(e,n){return Object.assign.apply(Object,[{}].concat(Object(f.a)(e.map((function(e){return Object(s.a)({},e[n],e)})))))},b={Device:"deviceId",DeviceParser:"id"},_=function(e){if(!b.hasOwnProperty(e))throw new Error("Invalid Model ID Mapping");return b[e]},w=function(e,n,t){if(!n||!Object.keys(t).length)return e;var r=e.hasOwnProperty(n)?e[n]:{},a=_(n),i=t.hasOwnProperty(a)?t[a]:null;if(!i)throw new Error("Instance is Missing ID Field");var o=Object(s.a)({},i,t);return r=Object(l.a)({},r,{},o),Object(l.a)({},e,Object(s.a)({},n,r))},y=function(e,n,t,r){if(!n||!Object.keys(r).length)return e;var a=e.hasOwnProperty(n)?e[n]:{};if(!t)throw new Error("Instance is Missing ID Field");var i=a.hasOwnProperty(t)?a[t]:null;if(!i)throw new Error("Can not find the Instance with ID ".concat(t));var o=Object(l.a)({},i,{},r),c=Object(s.a)({},t,o);return a=Object(l.a)({},a,{},c),Object(l.a)({},e,Object(s.a)({},n,a))},E=function(e,n,t){if(!n)return e;var r=e.hasOwnProperty(n)?e[n]:{};return delete r[t],Object(l.a)({},e,Object(s.a)({},n,r))},O=function(e,n,t){if(!n)return e;var r=function(e,n){var t=_(e);return n instanceof Array?g(n,t):n}(n,t);return Object(l.a)({},e,Object(s.a)({},n,r))},j=function(e,n){return n?Object(l.a)({},e,Object(s.a)({},n,{})):e},S={lab_id:"",device_id:-1,parser_id:-1},I=t(10),x=Object(I.b)({models:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,t=n.model,r=void 0===t?"":t,a=n.instance,i=void 0===a?{}:a,o=n.instances,c=void 0===o?{}:o,s=n.instance_id,l=void 0===s?null:s;switch(n.type){case"CLEAR":return j(e,r);case"BULK_INSERT":return O(e,r,c);case"SAVE":return w(e,r,i);case"UPDATE":return y(e,r,l,i);case"DELETE":return E(e,r,l);default:return e}},filters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,n=arguments.length>1?arguments[1]:void 0,t=n||{},r=t.field,a=void 0===r?"lab_id":r,i=t.value,o=void 0===i?-1:i;switch(n.type){case"CLEAR_FILTERS":return Object(l.a)({},e,{},S);case"APPLY_FILTERS":return Object(l.a)({},e,Object(s.a)({},a,o));default:return e}}}),D=Object(I.c)(x,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),N=t(33),C=function(e){(e=(e=e.map((function(e){var n=e.settings,t=void 0===n?"{}":n;try{t=JSON.parse(e.settings||"{}")}catch(r){t={}}return Object(l.a)({},e,{settings:t})})))||[]).unshift({deviceId:-1,deviceName:"Select Device",settings:"{}",labId_id:"",globalParser_id:-1}),m("Device",g(e,"deviceId"))},k=function(e){var n=e.lab_id,t=void 0===n?null:n;fetch("interfacing/get-devices",{method:"GET",headers:{"Content-Type":"application/json"},data:JSON.stringify({lab_id:t})}).then((function(e){return e.json()})).then((function(e){return C(e.devices)})).catch((function(e){return C([])}))},P=function(){return'\n/*\n\n  To change the paramter use the following code snippet\n\n  parameter = parameter in device.parameter_mapping?\n    device.parameter_mapping[parameter]: parameter;\n\n  for calculation support use below code snippet\n  value = device.parse_and_calculate_value(parameter, value);\n\n*/\n\nconst parser = function({ received_str, device  }) {\n  let values = {};\n  let sample_ids = [];\n  let sampleId = null;\n  let is_query = false;\n  let report_values = [];\n\n  // start device parser from here\n\n  // push the last value in the report_values\n  report_values.push({\n    data: {\n      sampleId,\n      values: Object.assign({}, values)\n    }\n  });\n\n  return { report_values, query: {sample_ids}, is_query }\n}\n\nmodule.exports = { parser, build_order: args => "" }'},T=function(e){var n=e.receivedStr,t=e.parserScript,r=e.deviceId,a=e.handleChange,i=document.getElementById("parser-script");i&&i.remove();var o=document.createElement("script");o.text=function(e){return e.replace(new RegExp("const","g"),"var").replace(new RegExp("let","g"),"var").split("module.exports = ")[0]}(t),o.id="parser-script",document.body.appendChild(o);if("parser"in window)try{var c=function(e){var n=D.getState().models,t=void 0===n?{}:n,r="Device"in t?t.Device:{};return new N.a(e&&e in r?r[e]:{})}(r);a({parsedResult:window.parser({device:c,received_str:n})})}catch(s){a({parserError:s})}},R=function(e){var n=e.parserScript,t=void 0===n?"":n,r=e.handleChange,i={tabSize:2,insertSpaces:!0,automaticLayout:!0,folding:window.screen.width>=768,lineNumbers:window.screen.width<=768?"off":"on",glyphMargin:window.screen.width>=768,minimap:{enabled:!1}};return a.a.createElement(v.ControlledEditor,{height:"100vh",language:"javascript",theme:"vs-dark",value:t,options:i,editorDidMount:function(e,n){var a=P();t||r({parserScript:a}),n.focus()},onChange:function(e,n){return r({parserScript:n})}})},A=t(80),L=t(81),M=t(82),U=function(e){var n=e.id,t=void 0===n?"":n,r=e.name,a=void 0===r?"":r,i=e.value,o=void 0===i?"":i,c=e.type,s=void 0===c?"text":c,l=e.className,u=void 0===l?"":l,d=e.disabled,p=void 0!==d&&d,v=e.input_label,f=void 0===v?"":v,m=e.onChange,h=void 0===m?function(e){return e.preventDefault()}:m;if(!t)throw new Error("Invalid Input Id");return a=a||t,f=f||t.replace(/([-_])+/g," ").trim().split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join("").replace(/([A-Z])/g," $1"),{id:t,type:s,name:a,value:o,disabled:p,onChange:h,className:u=u||t,input_label:f,placeholder:f}},B=function(e){var n=U(e),t=n.name,r=n.input_label;return a.a.createElement(A.a,null,a.a.createElement(L.a,{for:t,className:"form-label"},r),a.a.createElement(M.a,n))},F=t(85),W=function(e){var n=e.receivedStr,t=void 0===n?"":n,r=e.parserScript,i=void 0===r?"":r,o=e.deviceId,c=void 0===o?-1:o,s=e.handleChange;return a.a.createElement(p.a,{xs:"12",style:{paddingTop:"2px"}},a.a.createElement(d.a,null,a.a.createElement(p.a,{xs:"4",style:{marginBottom:"5px",textAlign:"left"}},a.a.createElement(F.a,{outline:!0,color:"primary",className:"parser-buttons parser-buttons-left-0",size:"sm",onClick:function(e){return function(e){e.preventDefault(),T({receivedStr:t,parserScript:i,deviceId:c,handleChange:s})}(e)},disabled:i.length<=0||t.length<=0},"Parse")),a.a.createElement(p.a,{xs:"8",style:{marginBottom:"5px",textAlign:"right"}},a.a.createElement(F.a,{outline:!0,color:"secondary",className:"parser-buttons",size:"sm",onClick:function(e){return function(e){e.preventDefault(),s({parserScript:P()})}(e)}},"New"))))},J=Object(c.b)((function(e,n){var t=function(e){return Object.keys(e).sort((function(e,n){return e-n}))},r=e.models,a=void 0===r?{}:r,i=e.filters,o=void 0===i?{}:i,c="Device"in a?a.Device:{},s="DeviceParser"in a?a.DeviceParser:{},u=t(c).map((function(e){return c[e]})),d=t(s).map((function(e){return s[e]}));return Object(l.a)({devices:u,parsers:d,deviceParsers:s},o)}))((function(e){var n=Object(r.useState)({}),t=Object(u.a)(n,2),i=t[0],o=t[1],c=(e.deviceParsers,e.devices,e.parsers,i.labId,i.deviceId),v=void 0===c?-1:c,f=(i.parserId,i.receivedStr),m=void 0===f?"":f,h=i.parserError,g=void 0===h?"":h,b=i.parserScript,_=void 0===b?"":b,w=i.parsedResult,y=void 0===w?{}:w,E=function(e){return o(Object(l.a)({},i,{},e))};return a.a.createElement(a.a.Fragment,null,a.a.createElement(d.a,{className:"row-margin-0"},a.a.createElement(p.a,{sm:"7",xs:"12",style:{paddingLeft:"0px"}},R({parserScript:_,handleChange:E})),a.a.createElement(p.a,{sm:"5",xs:"12",className:"col-padding-left-15",style:{paddingLeft:"0px",paddingTop:"30px"}},a.a.createElement(d.a,null,a.a.createElement(p.a,{xs:"12"},B({type:"textarea",id:"receivedStr",className:"received-str",input_label:"Received Result",value:m,onChange:function(e){return E(Object(s.a)({},e.target.id,e.target.value))}}))),a.a.createElement(d.a,null,W({receivedStr:m,parserScript:_,deviceId:v,handleChange:E})),a.a.createElement(d.a,null,a.a.createElement(p.a,{xs:"12"},B({disable:!0,id:"parsed-result",type:"textarea",value:JSON.stringify(y,null,2)}))),a.a.createElement(d.a,null,a.a.createElement(p.a,{xs:"12"},g&&B({disable:!0,id:"parser-error",type:"textarea",value:g}))))))})),q=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function X(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}t(77),t(78);k({}),function(e){var n=e.lab_id,t=void 0===n?null:n,r=e.device_id,a=void 0===r?null:r,i=e.parser_id,o=void 0===i?null:i;fetch("interfacing/get-parsers",{method:"GET",headers:{"Content-Type":"application/json"},data:JSON.stringify({lab_id:t,device_id:a,parser_id:o})}).then((function(e){return e.json()})).then((function(e){return h(e.parsers)})).catch((function(e){console.error(e),h([])}))}({}),o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(c.a,{store:D},a.a.createElement(J,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/verify-parsers",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/verify-parsers","/service-worker.js");q?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var r=t.headers.get("content-type");404===t.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):X(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):X(n,e)}))}}()}},[[36,1,2]]]);
//# sourceMappingURL=main.e4589f60.chunk.js.map