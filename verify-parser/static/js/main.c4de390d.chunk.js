(this["webpackJsonpverify-parsers"]=this["webpackJsonpverify-parsers"]||[]).push([[0],{36:function(e,n){},38:function(e,n,t){"use strict";(function(e){t.d(n,"a",(function(){return a}));var r=t(39),a=function n(t){var a=this;Object(r.a)(this,n),this.prepareParameterMappings=function(){a.parameter_mapping={},a.parameter_options={},a.available_server_names=[];for(var e=a.settings.matchingKeywords,n=void 0===e?[]:e,t=0;t<n.length;t++){var r=n[t],i=r.machinename,o=void 0===i?"":i,c=r.servername,s=void 0===c?"":c;a.parameter_mapping[o]=s,a.parameter_options[s]=r,a.available_server_names.push(s)}},this.send=function(e){return console.warn("[MockDevice] ".concat(e))},this.info=function(e,n){return console.log("[".concat(n||"MockDevice","] ").concat(e))},this.debug=function(e,n){return console.warn("[".concat(n||"MockDevice","] ").concat(e))},this.error=function(e,n){return console.error("[".concat(n||"MockDevice","] ").concat(e))},this.modulo_256=function(n){var t=e.from(n).reduce((function(e,n){return e+n}),0);return"00".concat((t%256).toString(16).toUpperCase()).slice(-2)},this.parse_and_calculate_value=function(e,n){var t="",r={divide_by:1,multiply_by:1,max_decimals:2},i={divide_by:function(e,n){return e/n},multiply_by:function(e,n){return e*n},max_decimals:function(e,n){return e.toFixed(n)},apply_round:function(e,n){return Math.round(e)},requires_int:function(e,n){return parseInt(e)}},o=e in a.parameter_options?a.parameter_options[e]:{};if(isNaN(n)||isNaN(parseFloat(n)))return n;t=parseFloat(n);return["divide_by","multiply_by","max_decimals","apply_round","requires_int"].forEach((function(e){try{if(!(e in o))return;var n=o[e];n=isNaN(n)?r[e]:n,t=(n?i[e]:function(e){return e})(t,n)}catch(c){a.error(c.stack)}})),t},this.device=t,this.settings="settings"in t?t.settings:{},this.prepareParameterMappings()}}).call(this,t(15).Buffer)},41:function(e,n,t){e.exports=t(89)},85:function(e,n){},86:function(e,n){},87:function(e,n,t){},89:function(e,n,t){"use strict";t.r(n);var r=t(1),a=t.n(r),i=t(17),o=t.n(i),c=t(20),s=t(3),l=t(5),u=t(40),d=function(e,n){return I.dispatch({type:"BULK_INSERT",model:e,instances:n})},p=t(38),v=function(e){(e=(e=e.map((function(e){var n=e.settings,t=void 0===n?"{}":n;try{t=JSON.parse(e.settings||"{}")}catch(r){t={}}return Object(s.a)({},e,{settings:t})})))||[]).unshift({deviceId:-1,deviceName:"Select Device",settings:"{}",labId_id:"",globalParser_id:-1}),d("Device",h(e,"deviceId"))},f=function(e){var n=e.receivedStr,t=e.parserScript,r=e.deviceId,a=e.handleChange,i=document.getElementById("parser-script");i&&i.remove();var o=document.createElement("script");o.text=function(e){return e.replace(new RegExp("const","g"),"var").replace(new RegExp("let","g"),"var").split("module.exports = ")[0]}(t),o.id="parser-script",document.body.appendChild(o);if("parser"in window)try{var c=function(e){var n=I.getState().models,t=void 0===n?{}:n,r="Device"in t?t.Device:{};return new p.a(e&&e in r?r[e]:{})}(r);a({parsedResult:window.parser({device:c,received_str:n})})}catch(s){a({parserError:s})}},m=function(e){(e=e||[]).unshift({id:-1,s3_key:null,file_name:"Select Parser"}),d("DeviceParser",h(e,"id"))},h=function(e,n){return Object.assign.apply(Object,[{}].concat(Object(u.a)(e.map((function(e){return Object(l.a)({},e[n],e)})))))},g={Device:"deviceId",DeviceParser:"id"},_=function(e){if(!g.hasOwnProperty(e))throw new Error("Invalid Model ID Mapping");return g[e]},b=function(e,n,t){if(!n||!Object.keys(t).length)return e;var r=e.hasOwnProperty(n)?e[n]:{},a=_(n),i=t.hasOwnProperty(a)?t[a]:null;if(!i)throw new Error("Instance is Missing ID Field");var o=Object(l.a)({},i,t);return r=Object(s.a)({},r,{},o),Object(s.a)({},e,Object(l.a)({},n,r))},w=function(e,n,t,r){if(!n||!Object.keys(r).length)return e;var a=e.hasOwnProperty(n)?e[n]:{};if(!t)throw new Error("Instance is Missing ID Field");var i=a.hasOwnProperty(t)?a[t]:null;if(!i)throw new Error("Can not find the Instance with ID ".concat(t));var o=Object(s.a)({},i,{},r),c=Object(l.a)({},t,o);return a=Object(s.a)({},a,{},c),Object(s.a)({},e,Object(l.a)({},n,a))},y=function(e,n,t){if(!n)return e;var r=e.hasOwnProperty(n)?e[n]:{};return delete r[t],Object(s.a)({},e,Object(l.a)({},n,r))},E=function(e,n,t){if(!n)return e;var r=function(e,n){var t=_(e);return n instanceof Array?h(n,t):n}(n,t);return Object(s.a)({},e,Object(l.a)({},n,r))},O=function(e,n){return n?Object(s.a)({},e,Object(l.a)({},n,{})):e},j={lab_id:"",device_id:-1,parser_id:-1},S=t(10),x=Object(S.b)({models:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,t=n.model,r=void 0===t?"":t,a=n.instance,i=void 0===a?{}:a,o=n.instances,c=void 0===o?{}:o,s=n.instance_id,l=void 0===s?null:s;switch(n.type){case"CLEAR":return O(e,r);case"BULK_INSERT":return E(e,r,c);case"SAVE":return b(e,r,i);case"UPDATE":return w(e,r,l,i);case"DELETE":return y(e,r,l);default:return e}},filters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,n=arguments.length>1?arguments[1]:void 0,t=n||{},r=t.field,a=void 0===r?"lab_id":r,i=t.value,o=void 0===i?-1:i;switch(n.type){case"CLEAR_FILTERS":return Object(s.a)({},e,{},j);case"APPLY_FILTERS":return Object(s.a)({},e,Object(l.a)({},a,o));default:return e}}}),I=Object(S.c)(x,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),D=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function N(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var k=t(21),C=t(91),P=t(90),T=t(25),R=function(e){var n=e.parserScript,t=void 0===n?"":n,r=e.handleChange,i={tabSize:2,insertSpaces:!0,automaticLayout:!0,folding:window.screen.width>=768,lineNumbers:window.screen.width<=768?"off":"on",glyphMargin:window.screen.width>=768,minimap:{enabled:!1}};return a.a.createElement(T.ControlledEditor,{height:"100vh",language:"javascript",theme:"vs-dark",value:t,options:i,editorDidMount:function(e,n){t||r({parserScript:'\n/*\n\n  To change the paramter use the following code snippet\n\n  parameter = parameter in device.parameter_mapping?\n    device.parameter_mapping[parameter]: parameter;\n\n  for calculation support use below code snippet\n  value = device.parse_and_calculate_value(parameter, value);\n\n*/\n\nconst parser = function({ received_str, device  }) {\n  let values = {};\n  let sample_ids = [];\n  let sampleId = null;\n  let is_query = false;\n  let report_values = [];\n\n  // start device parser from here\n\n  // push the last value in the report_values\n  report_values.push({\n    data: {\n      sampleId,\n      values: Object.assign({}, values)\n    }\n  });\n\n  return { report_values, query: {sample_ids}, is_query }\n}\n\nmodule.exports = { parser, build_order: args => "" }'}),n.focus()},onChange:function(e,n){return r({parserScript:n})}})},A=t(13),L=t.n(A),M=t(28),U=(t(82),t(92)),B=t(93),F=function(e){var n=e.receivedStr,t=void 0===n?"":n,r=e.parserScript,i=void 0===r?"":r,o=e.deviceId,c=void 0===o?-1:o,s=e.handleChange;return a.a.createElement(P.a,{xs:"12",style:{paddingTop:"2px"}},a.a.createElement(C.a,null,a.a.createElement(P.a,{xs:"8",style:{marginBottom:"5px",textAlign:"left",display:"flex"}},a.a.createElement(U.a,{outline:!0,size:"sm",color:"primary",className:"parser-buttons parser-buttons-left-0",onClick:function(e){return function(e){e.preventDefault(),f({receivedStr:t,parserScript:i,deviceId:c,handleChange:s})}(e)},disabled:i.length<=0||t.length<=0},"Parse"),a.a.createElement(B.a,{type:"file",name:"file",id:"upload-file",onChange:function(e){e.preventDefault();var n=function(){var e=Object(M.a)(L.a.mark((function e(n){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),t=function(){var e=Object(M.a)(L.a.mark((function e(n){var t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.target.result,s({receivedStr:t});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),r=new FileReader,a=e.target.files[0],i="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===a.type?[!0,n]:[!1,t],o=Object(k.a)(i,2),c=o[0],l=o[1];c?r.readAsBinaryString(a):r.readAsText(a),r.onload=l},className:"upload-btn parser-buttons"})),a.a.createElement(P.a,{xs:"4",style:{marginBottom:"5px",textAlign:"right"}},a.a.createElement(U.a,{outline:!0,color:"secondary",className:"parser-buttons",size:"sm",onClick:function(e){return function(e){e.preventDefault(),s({parserScript:'\n/*\n\n  To change the paramter use the following code snippet\n\n  parameter = parameter in device.parameter_mapping?\n    device.parameter_mapping[parameter]: parameter;\n\n  for calculation support use below code snippet\n  value = device.parse_and_calculate_value(parameter, value);\n\n*/\n\nconst parser = function({ received_str, device  }) {\n  let values = {};\n  let sample_ids = [];\n  let sampleId = null;\n  let is_query = false;\n  let report_values = [];\n\n  // start device parser from here\n\n  // push the last value in the report_values\n  report_values.push({\n    data: {\n      sampleId,\n      values: Object.assign({}, values)\n    }\n  });\n\n  return { report_values, query: {sample_ids}, is_query }\n}\n\nmodule.exports = { parser, build_order: args => "" }'})}(e)}},"New"))))},q=t(94),W=t(95),J=function(e){var n=function(e){var n=e.id,t=void 0===n?"":n,r=e.name,a=void 0===r?"":r,i=e.value,o=void 0===i?"":i,c=e.type,s=void 0===c?"text":c,l=e.className,u=void 0===l?"":l,d=e.disabled,p=void 0!==d&&d,v=e.input_label,f=void 0===v?"":v,m=e.onChange,h=void 0===m?function(e){return e.preventDefault()}:m;if(!t)throw new Error("Invalid Input Id");return a=a||t,f=f||t.replace(/([-_])+/g," ").trim().split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join("").replace(/([A-Z])/g," $1"),{id:t,type:s,name:a,value:o,disabled:p,onChange:h,className:u=u||t,input_label:f,placeholder:f}}(e),t=n.name,r=n.input_label;return a.a.createElement(q.a,null,a.a.createElement(W.a,{for:t,className:"form-label"},r),a.a.createElement(B.a,n))},X=Object(c.b)((function(e,n){var t=function(e){return Object.keys(e).sort((function(e,n){return e-n}))},r=e.models,a=void 0===r?{}:r,i=e.filters,o=void 0===i?{}:i,c="Device"in a?a.Device:{},l="DeviceParser"in a?a.DeviceParser:{},u=t(c).map((function(e){return c[e]})),d=t(l).map((function(e){return l[e]}));return Object(s.a)({devices:u,parsers:d,deviceParsers:l},o)}))((function(e){var n=Object(r.useState)({}),t=Object(k.a)(n,2),i=t[0],o=t[1],c=i.deviceId,u=void 0===c?-1:c,d=i.receivedStr,p=void 0===d?"":d,v=i.parserError,f=void 0===v?"":v,m=i.parserScript,h=void 0===m?"":m,g=i.parsedResult,_=void 0===g?{}:g,b=function(e){return o(Object(s.a)({},i,{},e))};return a.a.createElement(a.a.Fragment,null,a.a.createElement(C.a,{className:"row-margin-0"},a.a.createElement(P.a,{sm:"7",xs:"12",style:{paddingLeft:"0px"}},R({parserScript:h,handleChange:b})),a.a.createElement(P.a,{sm:"5",xs:"12",className:"col-padding-left-15",style:{paddingLeft:"0px",paddingTop:"30px"}},a.a.createElement(C.a,null,a.a.createElement(P.a,{xs:"12"},J({type:"textarea",id:"receivedStr",className:"received-str",input_label:"Received Result",value:p,onChange:function(e){return b(Object(l.a)({},e.target.id,e.target.value))}}))),a.a.createElement(C.a,null,F({receivedStr:p,parserScript:h,deviceId:u,handleChange:b})),a.a.createElement(C.a,null,a.a.createElement(P.a,{xs:"12"},J({disable:!0,id:"parsed-result",type:"textarea",value:JSON.stringify(_,null,2)}))),a.a.createElement(C.a,null,a.a.createElement(P.a,{xs:"12"},f&&J({disable:!0,id:"parser-error",type:"textarea",value:f}))))))}));t(87),t(88);!function(e){var n=e.lab_id,t=void 0===n?null:n;fetch("interfacing/get-devices",{method:"GET",headers:{"Content-Type":"application/json"},data:JSON.stringify({lab_id:t})}).then((function(e){return e.json()})).then((function(e){return v(e.devices)})).catch((function(e){return v([])}))}({}),function(e){var n=e.lab_id,t=void 0===n?null:n,r=e.device_id,a=void 0===r?null:r,i=e.parser_id,o=void 0===i?null:i;fetch("interfacing/get-parsers",{method:"GET",headers:{"Content-Type":"application/json"},data:JSON.stringify({lab_id:t,device_id:a,parser_id:o})}).then((function(e){return e.json()})).then((function(e){return m(e.parsers)})).catch((function(e){console.error(e),m([])}))}({}),o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(c.a,{store:I},a.a.createElement(X,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/verify-parser",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/verify-parser","/service-worker.js");D?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var r=t.headers.get("content-type");404===t.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):N(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):N(n,e)}))}}()}},[[41,1,2]]]);